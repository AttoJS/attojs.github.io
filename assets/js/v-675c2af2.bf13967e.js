(self.webpackChunkvue_request_doc=self.webpackChunkvue_request_doc||[]).push([[856],{3334:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(8133);const p=(0,t.Wm)("h1",{id:"错误重试"},[(0,t.Wm)("a",{class:"header-anchor",href:"#错误重试"},"#"),(0,t.Uk)(" 错误重试")],-1),e=(0,t.Wm)("p",null,"在应用程序中，暂时性错误其实是很常见的，例如：接口服务器与数据库服务器的连接暂时断开，或者用户端网络暂时发生故障。这些故障往往都会在短时间内自行修正，如果能在延迟合适的时间后再尝试，该请求可能会成功。",-1),o=(0,t.Uk)("现在你可以通过简单的配置，让 VueRequest 帮你处理这件事。只需要提供一个 "),c=(0,t.Wm)("code",null,"errorRetryCount",-1),u=(0,t.Uk)(" 来告诉我们重试的次数。正如下面的例子"),r=(0,t.uE)('<h2 id="errorretrycount"><a class="header-anchor" href="#errorretrycount">#</a> errorRetryCount</h2><div class="language-tsx ext-tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-request&#39;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  name<span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>\n  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token string">&#39;api/users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      errorRetryCount<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="errorretryinterval"><a class="header-anchor" href="#errorretryinterval">#</a> errorRetryInterval</h2>',3),l=(0,t.Uk)("你也可以提供 "),k=(0,t.Wm)("code",null,"errorRetryInterval",-1),i=(0,t.Uk)(" 来设定重试的间隔时间"),d=(0,t.uE)('<div class="language-tsx ext-tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-request&#39;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  name<span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>\n  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token string">&#39;api/users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      errorRetryCount<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n      errorRetryInterval<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div>',1),g={render:function(n,s){const a=(0,t.up)("RouterLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[p,e,(0,t.Wm)("p",null,[o,(0,t.Wm)(a,{to:"/vue-request-docs/zh/api/options.html#errorretrycount"},{default:(0,t.w5)((()=>[c])),_:1}),u]),r,(0,t.Wm)("p",null,[l,(0,t.Wm)(a,{to:"/vue-request-docs/zh/api/options.html#errorretryinterval"},{default:(0,t.w5)((()=>[k])),_:1}),i]),d],64)}}},5682:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-675c2af2",path:"/zh/guide/documents/errorRetry.html",title:"错误重试",frontmatter:{},excerpt:"",headers:[{level:2,title:"errorRetryCount",slug:"errorretrycount",children:[]},{level:2,title:"errorRetryInterval",slug:"errorretryinterval",children:[]}],filePathRelative:"zh/guide/documents/errorRetry.md",git:{updatedTime:1613724187e3,contributors:[]}}}}]);